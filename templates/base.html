<!DOCTYPE html>
<html lang="en">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Datican | Open Data Repository{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'images/datican_logo_io.png' %}">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#2C3E50",
              secondary: "#1A252F",
              accent: "#E74C3C",
            },
          },
        },
      };
      // Initialize Alpine.js
      document.addEventListener('DOMContentLoaded', function() {
        // Make sure Alpine is loaded
        if (typeof Alpine === 'undefined') {
          console.warn('Alpine.js not loaded, loading now...');
          // Load Alpine.js dynamically if not loaded
          const script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js';
          script.defer = true;
          document.head.appendChild(script);
          
          script.onload = function() {
            Alpine.start();
          };
        } else {
          Alpine.start();
        }
      });
    </script>

    <!-- AlpineJS -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>


    {% block extra_head %}{% endblock %}
  </head>
  <!-- base.html - Update body tag -->
<body class="bg-gray-50">
    <!-- Main layout container -->
    <div class="flex min-h-screen">
        {% block sidebar_header %}
            {% if request.resolver_match.url_name in 'dataset_list,dataset_detail,dataset_request,request_status,dataset_download,review_request,director_review,manager_recommendations,manager_rejections,director_approvals,director_rejections' %}
                {% include 'partials/_sidebar_header.html' %}
            {% else %}
                {% include 'partials/_header.html' %}
            {% endif %}
        {% endblock %}

        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col">
            <!-- Content container that grows and handles scrolling -->
            <div id="main-content" class="flex-1 transition-all duration-300 
                {% if request.resolver_match.url_name not in 'dataset_list,dataset_detail,dataset_request,request_status,dataset_download,review_request,director_review,manager_recommendations,manager_rejections,director_approvals,director_rejections' %}
                    pt-16
                {% endif %}">
                <main class="h-full">
                    {% block content %}{% endblock %}
                </main>
            </div>
            
            <!-- Footer outside the main content -->
            {% include 'partials/_footer.html' %}
        </div>
    </div>

    {% include 'partials/_scripts.html' %}
    {% block extra_scripts %}{% endblock %}
</body>
</html>