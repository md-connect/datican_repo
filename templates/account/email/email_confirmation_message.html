{% load account %}

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Verify Your Email - DATICAN Repository</title>

<style>
table { border-collapse: collapse; }
img { border: 0; }
a { text-decoration: none; }

@media only screen and (max-width:600px) {
    .container { width:100% !important; }
    .padding { padding:24px !important; }
}
</style>
</head>

<body style="margin:0; padding:0; background:#F8FAFC; font-family:Arial, Helvetica, sans-serif;">

{% with confirmation_key=key|urlencode %}

<table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F8FAFC">
<tr>
<td align="center">

<!-- Container -->
<table width="620" class="container" cellpadding="0" cellspacing="0"
       style="background:#FFFFFF; border-radius:16px; overflow:hidden;">

    <!-- Header -->
    <tr>
        <td bgcolor="#0F172A" style="padding:40px 32px; text-align:center;">
            <div style="font-size:26px; font-weight:bold; color:#FFFFFF;">
                Welcome to DATICAN Repository! üéâ
            </div>
        </td>
    </tr>

    <!-- Body -->
    <tr>
        <td class="padding" style="padding:40px 32px; color:#020617;">

            <!-- Status -->
            <table cellpadding="0" cellspacing="0" align="center"
                   style="background:#ECFDF3; border:1px solid #A7F3D0;
                          border-radius:999px; margin-bottom:28px;">
                <tr>
                    <td style="padding:10px 18px; font-size:14px; font-weight:bold; color:#065F46;">
                        ‚úî Account Created Successfully
                    </td>
                </tr>
            </table>

            <p style="font-size:16px; color:#475569; line-height:1.7; margin:0 0 20px;">
                Thank you for creating an account on <strong>DATICAN Repository</strong>. 
                To complete your registration and access all features, please verify your email address.
            </p>

            <!-- Timer/Expiry Info -->
            <table width="100%" cellpadding="0" cellspacing="0"
                   style="background:#FFF1F2; border:1px solid #FECACA;
                          border-left:4px solid #E11D48;
                          border-radius:12px; margin:32px 0;">
                <tr>
                    <td style="padding:20px 24px;">
                        <div style="display:flex; align-items:center; gap:12px;">
                            <span style="font-size:24px;">‚è∞</span>
                            <div>
                                <div style="font-size:16px; font-weight:bold; color:#9F1239;">
                                    This verification link will expire in {{ expiration_days }} day(s)
                                </div>
                                <div style="font-size:14px; color:#64748B; margin-top:4px;">
                                    Please verify your email within this timeframe to activate your account.
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>

            <!-- CTA Button with URL-ENCODED token -->
            <div style="text-align:center; margin:36px 0;">
                <a href="{{ protocol }}://{{ site.domain }}{% url 'account_confirm_email' key=confirmation_key %}"
                   style="display:inline-block; background:#E11D48; color:#FFFFFF;
                          padding:16px 40px; border-radius:10px;
                          font-size:16px; font-weight:bold; text-decoration:none;">
                    ‚úÖ Verify Email Address
                </a>

                <p style="font-size:14px; color:#64748B; margin-top:20px;">
                    Or copy and paste this link into your browser:
                </p>

                <div style="font-family:Courier New, monospace; font-size:13px;
                            background:#F8FAFC; border:1px solid #E2E8F0;
                            padding:12px; border-radius:8px; word-break:break-all;">
                    {{ protocol }}://{{ site.domain }}{% url 'account_confirm_email' key=confirmation_key %}
                </div>
            </div>

            <!-- Important Notes -->
            <div style="margin-top:32px; padding-top:20px; border-top:1px solid #E2E8F0;">
                <p style="font-size:14px; color:#64748B; margin-bottom:8px;">
                    <strong>üìå Important:</strong>
                </p>
                <ul style="padding-left:18px; color:#475569; font-size:14px; line-height:1.6;">
                    <li>Your account is not fully active until you verify your email</li>
                    <li>You'll be automatically logged in after verification</li>
                    <li>If you didn't create this account, please ignore this email</li>
                </ul>
            </div>

            <!-- Need Help -->
            <table width="100%" cellpadding="0" cellspacing="0"
                   style="background:#F8FAFC; border-radius:12px; margin:32px 0 0; padding:20px;">
                <tr>
                    <td style="text-align:center;">
                        <p style="font-size:14px; color:#475569; margin:0;">
                            Need help? Contact us at 
                            <a href="mailto:{{ support_email }}" style="color:#E11D48;">{{ support_email }}</a>
                        </p>
                    </td>
                </tr>
            </table>

        </td>
    </tr>

    <!-- Footer -->
    <tr>
        <td bgcolor="#020617" style="padding:36px 32px; text-align:center; color:#94A3B8;">
            <div style="font-weight:bold; color:#FFFFFF;">
                {{ site_name }}
            </div>

            <p style="font-size:14px; margin:10px 0;">
                <a href="{{ site_url }}" style="color:#CBD5F5;">Visit Portal</a> ¬∑
                <a href="mailto:{{ support_email }}" style="color:#CBD5F5;">Contact Support</a>
            </p>

            <p style="font-size:12px;">
                ¬© {% now "Y" %} {{ site_name }} ¬∑ All rights reserved.
            </p>
        </td>
    </tr>

</table>

</td>
</tr>
</table>

{% endwith %}
</body>
</html>